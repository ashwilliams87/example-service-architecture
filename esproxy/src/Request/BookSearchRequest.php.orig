<?php

namespace App\Request;

use App\DTO\Request\BookSearchDTO;
use Symfony\Component\Serializer\Annotation\SerializedName;
use Symfony\Component\Validator\Constraints as Assert;


class BookSearchRequest
{
    public function __construct(
        #[Assert\NotBlank]
        #[Assert\Type('string')]
        public readonly string $query,

        #[Assert\Type('integer', message: "Limit must be an integer")]
        #[Assert\PositiveOrZero(message: "Limit must be a positive integer or zero")]
        #[Assert\LessThanOrEqual(1000, message: "Limit must be less than or equal to 1000")]
        #[SerializedName("limit")]
        private int            $limit = 10
    )
    {

    }

    public function toDTO(): BookSearchDTO
    {
        return (new BookSearchDTO($this->query, $this->limit, 0));
    }
}
