[2024-08-26 08:07:32 1724659652.724] sql (not cache): [Time: 9 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:07:32 1724659652.7366] sql (new - Cacher): [Time: 9 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:07:32 1724659652.8063] sql (not cache): [Time: 18 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:07:32 1724659652.8448] sql (new - Cacher): [Time: 9 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:07:32 1724659652.9775] sql (new - Cacher): [Time: 113 ms Mem: 0 B (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:08:04 1724659684.3473] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:08:04 1724659684.3548] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:08:04 1724659684.3691] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:08:04 1724659684.4027] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:08:04 1724659684.4396] sql (new - Cacher): [Time: 24 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:09:58 1724659798.7751] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:09:58 1724659798.7824] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:09:58 1724659798.796] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:09:58 1724659798.8275] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:09:58 1724659798.8476] sql (new - Cacher): [Time: 17 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:10:54 1724659854.0464] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:10:54 1724659854.054] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:10:54 1724659854.068] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:10:54 1724659854.0999] sql (new - Cacher): [Time: 6 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:10:54 1724659854.1249] sql (new - Cacher): [Time: 19 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:11:01 1724659861.5438] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:11:01 1724659861.5513] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:11:01 1724659861.5647] sql (not cache): [Time: 10 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:11:01 1724659861.596] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:11:01 1724659861.6162] sql (new - Cacher): [Time: 17 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:11:12 1724659872.5279] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:11:12 1724659872.5353] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:11:12 1724659872.549] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:11:12 1724659872.5797] sql (new - Cacher): [Time: 6 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:11:12 1724659872.609] sql (new - Cacher): [Time: 22 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:16:00 1724660160.1155] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:16:00 1724660160.1237] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:16:00 1724660160.1419] sql (not cache): [Time: 12 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:16:00 1724660160.1814] sql (new - Cacher): [Time: 9 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:16:00 1724660160.2298] sql (new - Cacher): [Time: 29 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:16:00 1724660160.4278] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:16:00 1724660160.4353] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:16:00 1724660160.4487] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:16:00 1724660160.4804] sql (new - Cacher): [Time: 6 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:16:00 1724660160.5006] sql (new - Cacher): [Time: 17 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:16:16 1724660176.5997] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:16:16 1724660176.6079] sql (new - Cacher): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:16:16 1724660176.6218] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:16:16 1724660176.6535] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:16:16 1724660176.6738] sql (new - Cacher): [Time: 17 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:24:29 1724660669.6255] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:24:29 1724660669.6331] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:24:29 1724660669.6484] sql (not cache): [Time: 12 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:24:29 1724660669.6797] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:24:29 1724660669.703] sql (new - Cacher): [Time: 18 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:27:42 1724660862.4757] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:27:42 1724660862.4833] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:27:42 1724660862.4981] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:27:42 1724660862.5312] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:27:42 1724660862.5741] sql (new - Cacher): [Time: 27 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:27:56 1724660876.2215] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:27:56 1724660876.2291] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:27:56 1724660876.2451] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:27:56 1724660876.281] sql (new - Cacher): [Time: 9 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:27:56 1724660876.3312] sql (new - Cacher): [Time: 31 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:30:26 1724661026.2247] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:30:26 1724661026.2322] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:30:26 1724661026.2465] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:30:26 1724661026.2791] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:30:26 1724661026.3106] sql (new - Cacher): [Time: 22 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:31:01 1724661061.6162] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:31:01 1724661061.6234] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:31:01 1724661061.6389] sql (not cache): [Time: 12 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:31:01 1724661061.6786] sql (new - Cacher): [Time: 9 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:31:01 1724661061.7229] sql (new - Cacher): [Time: 25 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:31:33 1724661093.4393] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:31:33 1724661093.4466] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:31:33 1724661093.4616] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:31:33 1724661093.4926] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:31:33 1724661093.5143] sql (new - Cacher): [Time: 18 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:31:47 1724661107.7891] sql (not cache): [Time: 9 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:31:47 1724661107.7964] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:31:47 1724661107.8104] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:31:47 1724661107.8416] sql (new - Cacher): [Time: 6 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:31:47 1724661107.8615] sql (new - Cacher): [Time: 16 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:32:07 1724661127.411] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:32:07 1724661127.4186] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:32:07 1724661127.4336] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:32:07 1724661127.468] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:32:07 1724661127.4947] sql (new - Cacher): [Time: 19 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:32:34 1724661154.6408] sql (not cache): [Time: 10 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:32:34 1724661154.6508] sql (new - Cacher): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:32:34 1724661154.6791] sql (not cache): [Time: 13 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:32:34 1724661154.7169] sql (new - Cacher): [Time: 9 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:32:34 1724661154.7659] sql (new - Cacher): [Time: 29 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:32:41 1724661161.4048] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:32:41 1724661161.4125] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:32:41 1724661161.4272] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:32:41 1724661161.4606] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:32:41 1724661161.5093] sql (new - Cacher): [Time: 30 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:33:46 1724661226.4941] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:33:46 1724661226.5015] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:33:46 1724661226.5162] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:33:46 1724661226.5504] sql (new - Cacher): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:33:46 1724661226.5923] sql (new - Cacher): [Time: 26 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:34:26 1724661266.3172] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:34:26 1724661266.3245] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:34:26 1724661266.3383] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:34:26 1724661266.3761] sql (new - Cacher): [Time: 9 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:34:26 1724661266.4197] sql (new - Cacher): [Time: 26 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:37:14 1724661434.898] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:37:14 1724661434.9056] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:37:14 1724661434.9202] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:37:14 1724661434.9544] sql (new - Cacher): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:37:15 1724661435.005] sql (new - Cacher): [Time: 29 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:39:45 1724661585.4377] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:39:45 1724661585.4453] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:39:45 1724661585.4592] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:39:45 1724661585.4909] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:39:45 1724661585.5146] sql (new - Cacher): [Time: 18 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:40:50 1724661650.526] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:40:50 1724661650.5334] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:40:50 1724661650.5476] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:40:50 1724661650.5796] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:40:50 1724661650.6002] sql (new - Cacher): [Time: 17 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:43:11 1724661791.2275] sql (not cache): [Time: 8 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_NO_CACHE `User`.`id` AS `user_pk`, `User`.`enabled` AS `user_active`, `User`.`last_login` AS `last_login`, `User`.`expires_at` AS `user_expired_at`, `User`.`roles`, `User`.`created_at` AS `created_at`, `User`.`updated_at` AS `updated_at`, `User`.`firstname` AS `user_name`, `User`.`subscriber_id` AS `subscriber__fk`, `User`.`patronymic`, `User`.`publisher_id` AS `publisher__fk`, `User`.`user_comment`, `User`.`warn_count`, `User`.`archive_vkr_id` AS `archive_vkr__fk`, `User`.`subdivision_id` AS `subdivision__fk`, `User`.`app_used`, `User`.`app_registration`, `User`.`try_discipline_count`, `User`.`last_new_at` AS `last_new_at`, `User`.`cabinet_settings__json`, `User`.`previous_subscriber_id`, `User`.`security_user_id` AS `security_user__fk` FROM `ebs`.`fos_user_user` `User` WHERE `User`.`security_user_id` = ?  ("17208427") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:43:11 1724661791.235] sql (new - Cacher): [Time: 7 ms Mem: 0 B (peak: 34 MB)]  SELECT roles FROM `ebs`.`fos_user_user_group` `User_Group` INNER JOIN `ebs`.`fos_user_group` `Group` ON (`User_Group`.`group_id` = `Group`.`id`) WHERE `User_Group`.`user_id` = ?  ("11534980") result: 'numRows' => 2, 'affectedRows' => 0, 'foundRows' => 2, 'insertId' => 

[2024-08-26 08:43:11 1724661791.2487] sql (not cache): [Time: 11 ms Mem: 0 B (peak: 34 MB)]  SELECT SQL_CALC_FOUND_ROWS SQL_NO_CACHE `Subscriber`.`id` AS `subscriber_pk`, `Subscriber`.`subscriber_name`, `Subscriber`.`subscriber_active`, `Subscriber`.`subscriber_id` AS `subscriber__fk`, `Subscriber`.`access_type_id` AS `access_type__fk`, `Subscriber`.`subscriber_type_id` AS `subscriber_type__fk`, `Subscriber`.`fio`, `Subscriber`.`email`, `Subscriber`.`post`, `Subscriber`.`phone`, `Subscriber`.`private_name`, `Subscriber`.`city_id` AS `city__fk`, `Subscriber`.`create_time` AS `create_time`, `Subscriber`.`subscriber_comment`, `Subscriber`.`head_access`, `Subscriber`.`reader_detail`, `Subscriber`.`contragent_id` AS `contragent__fk`, `Subscriber`.`fedurus_organization_name`, `Subscriber`.`code_1c`, `Subscriber`.`secret_key`, `Subscriber`.`secret_key_date` AS `secret_key_date`, `Subscriber`.`subscriber_created_at` AS `subscriber_created_at`, `Subscriber`.`send_registration_request`, `Subscriber`.`education_level_id` AS `education_level__fk`, `Subscriber`.`subscriber_account_ip__json`, `Subscriber`.`domain`, `Subscriber`.`auto_confirmation`, `Subscriber`.`subscriber_settings__json`, `Subscriber`.`moodle_login_url` FROM `ebs`.`ebs_subscriber` `Subscriber` WHERE `Subscriber`.`id` = ? LIMIT 1  ("1000000") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:43:11 1724661791.2853] sql (new - Cacher): [Time: 9 ms Mem: 0 B (peak: 34 MB)]  SELECT `Category`.`id` AS `category_pk`, `Category`.`child_categories__json` FROM `ebs`.`ebs_category` `Category` WHERE `Category`.`id` = ? AND `Category`.`area_knowledge_id` <> ? AND `Category`.`child_categories__json` <> ?  ("916", "916", "[]") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

[2024-08-26 08:43:11 1724661791.3244] sql (new - Cacher): [Time: 22 ms Mem: 2 MB (peak: 36 MB)]  SELECT DISTINCT SQL_CALC_FOUND_ROWS COUNT(DISTINCT CASE WHEN (Book.book_expired>"2024-08-26" AND Book.book_private=0) OR Available.access_id IS NOT NULL THEN Book.id ELSE NULL END) AS `all_count`, MAX(Book.book_expired) AS `expired`, MAX(CASE WHEN Available.access_id IS NULL THEN 0 ELSE 1 END) AS `available`, `Book`.`id`, `Book`.`book_private`, `Book`.`book_desc` AS `description`, `Book`.`publish_year` AS `year`, `Book`.`book_expired` AS `book_expired`, `Book`.`book_name` AS `title`, `Book`.`authors` AS `author`, `Book`.`pdf_path` AS `hasPdf`, `Book`.`epub_path` AS `hasEpub`, `Book`.`audio_path` AS `hasAudio`, `Book`.`synthesizer_path` AS `hasSyntex`, `Book`.`synthesizer_editor`, `Book`.`synthesizer_quality`, `Publisher`.`id` AS `publisher_id`, `Publisher`.`publisher_name` AS `publisher`, expired_date, access_id FROM `ebs`.`ebs_book` `Book` INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) LEFT JOIN (( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=0 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT `Access_Dynamic_Denormal`.`expired_date` AS `expired_date`, `Access_Dynamic_Denormal`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_dynamic_denormal` `Access_Dynamic_Denormal` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Dynamic_Denormal.publisher_id AND Book.area_knowledge_id=Access_Dynamic_Denormal.area_knowledge_id AND Book.book_expired>=Access_Dynamic_Denormal.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE "2024-08-26" BETWEEN Access_Dynamic_Denormal.start_date AND Access_Dynamic_Denormal.expired_date AND Access_Dynamic_Denormal.private=1 AND Access_Dynamic_Denormal.subscriber_id IN (1000000,1000825) AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=1 AND Book.extra=0 AND Book.book_active=1 GROUP BY `Book`.`id` ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=0 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Gift`.`expired_date` AS `expired_date`, `Access_Book_Gift`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_gift` `Access_Book_Gift` INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Access_Book_Gift.book_id AND Book.book_expired>=Access_Book_Gift.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Access_Book_Gift.user_id=11534980 AND "2024-08-26" BETWEEN Access_Book_Gift.start_date AND Access_Book_Gift.expired_date AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Static`.`expired_date` AS `expired_date`, `Access_Book_Static`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_static` `Access_Book_Static` INNER JOIN `ebs`.`ebs_packet_static` `Packet_Static` ON (Access_Book_Static.packet_static_id=Packet_Static.id AND "2024-08-26" BETWEEN Access_Book_Static.start_date AND Access_Book_Static.expired_date AND Access_Book_Static.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_packet_static_book_link` `Packet_Static_Book_Link` ON (Packet_Static_Book_Link.packet_static_id=Packet_Static.id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.id=Packet_Static_Book_Link.book_id AND CONCAT(Book.book_expired," 23:59:59") >= Access_Book_Static.start_date) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_private=0 AND Book.extra=1 AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Book_Role`.`expired_date` AS `expired_date`, `Access_Book_Role`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_book_role` `Access_Book_Role` INNER JOIN `ebs`.`ebs_access_role_action_link` `Access_Role_Action_Link` ON (Access_Role_Action_Link.access_role_id=Access_Book_Role.id) INNER JOIN `ebs`.`ebs_access_role_action` `Access_Role_Action` ON (Access_Role_Action_Link.access_role_action_id=Access_Role_Action.id AND Access_Role_Action.access_role_action_active=1) INNER JOIN `ebs`.`fos_user_group` `Group` ON (Group.id=Access_Book_Role.user_role_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Access_Book_Role.publisher_id AND Book.book_private=0 AND Book.book_expired>"2024-08-26") INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) WHERE Group.roles='a:1:{i:0;s:14:"ROLE_LAN_STAFF";}' AND (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 ) UNION ALL ( SELECT DISTINCT `Access_Seb`.`expired_date` AS `expired_date`, `Access_Seb`.`id` AS `access_id`, `Book`.`id` AS `book_id` FROM `ebs`.`ebs_access_seb` `Access_Seb` INNER JOIN `ebs`.`ebs_seb` `Seb` ON ("2024-08-26" BETWEEN Access_Seb.start_date AND Access_Seb.expired_date AND Seb.id=Access_Seb.seb_id AND Access_Seb.subscriber_id IN (1000000,1000825)) INNER JOIN `ebs`.`ebs_seb_publisher_link` `Seb_Publisher_Link` ON (Seb_Publisher_Link.seb_id=Access_Seb.seb_id) INNER JOIN `ebs`.`ebs_publisher` `Net_Publisher` ON (Seb_Publisher_Link.publisher_id=Net_Publisher.id) INNER JOIN `ebs`.`ebs_publisher` `Book_Publisher` ON (Net_Publisher.id=Book_Publisher.publisher_id) INNER JOIN `ebs`.`ebs_book` `Book` ON (Book.publisher_id=Book_Publisher.id AND Book.book_private=0 AND Book.synthesizer_path IS NOT NULL) INNER JOIN `ebs`.`ebs_book_category_link` `Packet_Book_Category_Link` ON (Packet_Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Packet_Category` ON (Packet_Category.id=Packet_Book_Category_Link.category_id AND Packet_Category.category_active=1) INNER JOIN `ebs`.`ebs_publisher` `Publisher` ON (Publisher.id=Book.publisher_id AND Publisher.publisher_active=1) INNER JOIN `ebs`.`ebs_book_category_link` `Book_Category_Link` ON (Book_Category_Link.book_id=Book.id) INNER JOIN `ebs`.`ebs_category` `Category` ON ((Category.id=Book_Category_Link.category_id) AND (Category.id IN(916,916)) AND (Category.category_active=1)) INNER JOIN `ebs`.`ebs_category` `Area_Knowledge` ON (Area_Knowledge.id=Category.area_knowledge_id AND Area_Knowledge.area_knowledge_id=917 AND Area_Knowledge.category_active=1) INNER JOIN `ebs`.`ebs_packet_dynamic` `Packet_Dynamic` ON (Packet_Dynamic.category_id=Area_Knowledge.id AND Packet_Dynamic.publisher_id=Publisher.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 )) `Available` ON (Available.book_id=Book.id) WHERE (Book.book_platform_id=2 OR Book.book_platform_id IS NULL) AND Book.synthesizer_path IS NOT NULL AND Book.book_active=1 GROUP BY `Book`.`id` HAVING (((expired>"2024-08-26" AND Book.book_private=0) OR available=1) AND all_count>0 ) ORDER BY available DESC, `Book`.`authors` ASC, `Book`.`book_name` ASC LIMIT 10  ("") result: 'numRows' => 1, 'affectedRows' => 0, 'foundRows' => 1, 'insertId' => 

